import{a as I,b as p,d as N,e as T,f as M,h as b,i as P,j as U,k as j,l as B,n as D}from"./chunk-7B53O55D.js";import{g as y,i as S,wa as R,xa as q}from"./chunk-F5JJTGBE.js";import"./chunk-F5FW6J2J.js";import{Cb as F,Eb as x,Mb as o,Qb as E,Va as l,Wa as _,ga as w,ib as s,kb as d,pb as h,qc as k,tb as a,ub as t,vb as c,wb as v,xb as C}from"./chunk-344WNGFA.js";import"./chunk-KT3CPUTC.js";function A(e,m){e&1&&(a(0,"small",16),o(1,"Username is required"),t())}function G(e,m){if(e&1&&(v(0),s(1,A,2,0,"small",16),C()),e&2){let n,i=x();l(),h(!((n=i.registerForm.get("username"))==null||n.errors==null)&&n.errors.required?1:-1)}}function V(e,m){e&1&&(a(0,"small",16),o(1,"Email is required"),t())}function O(e,m){e&1&&(a(0,"small",16),o(1,"Invalid email address"),t())}function Y(e,m){if(e&1&&(v(0),s(1,V,2,0,"small",16)(2,O,2,0,"small",16),C()),e&2){let n,i=x();l(),h(!((n=i.registerForm.get("email"))==null||n.errors==null)&&n.errors.required?1:2)}}function $(e,m){e&1&&(v(0),a(1,"small",16),o(2,"Password is required"),t(),C())}function z(e,m){e&1&&c(0,"span",13)}var ee=(()=>{class e{authService;snackBar;router;registerForm=new M({email:new b("",[p.required,p.email]),password:new b("",[p.required]),username:new b("",[p.required])});loading=!1;constructor(n,i,r){this.authService=n,this.snackBar=i,this.router=r}onSubmit(){if(this.registerForm.markAllAsTouched(),this.registerForm.invalid)return;this.loading=!0;let n=this.registerForm.getRawValue();this.authService.registerUser(n?.email,n?.password).then(()=>{this.snackBar.open("Welcome to FletNix!",void 0,{panelClass:"success-snackbar"}),this.router.navigate([`/${S.dashboard.base()}`]),this.authService.saveUserInfo(!0)},i=>{this.loading=!1,i?.message?.includes("auth/email-already-in-use")?(this.router.navigate([`/${S.auth.login()}`]),this.snackBar.open("Account exits already. Please login",void 0,{panelClass:"error-snackbar"})):this.snackBar.open(i,void 0,{panelClass:"error-snackbar"}),this.authService.saveUserInfo(!1)})}static \u0275fac=function(i){return new(i||e)(_(q),_(R),_(y))};static \u0275cmp=w({type:e,selectors:[["app-register"]],standalone:!0,features:[E],decls:32,vars:6,consts:[[1,"relative","image-background","min-h-screen","flex","items-center","justify-center","lg:justify-start"],[1,"absolute","top-0","left-0","p-4","text-3xl","text-white","font-extrabold"],[1,"card","glass","md:ml-20","w-full","max-w-sm","shrink-0","shadow-2xl"],[1,"card-body",3,"ngSubmit","formGroup"],[1,"form-control"],[1,"label"],[1,"label-text"],["formControlName","username","type","text","placeholder","Username","required","",1,"input","input-bordered"],[4,"ngIf"],["formControlName","email","type","email","placeholder","Email","required","",1,"input","input-bordered"],["formControlName","password","type","password","placeholder","Password","required","",1,"input","input-bordered"],[1,"form-control","mt-6"],[1,"btn","btn-primary",3,"disabled"],[1,"loading","loading-spinner","loading-md"],[1,"hidden","lg:block","ml-20","text-white","max-w-2xl","text-right"],[1,"text-5xl"],[1,"text-error"]],template:function(i,r){if(i&1&&(a(0,"div",0)(1,"p",1),o(2,"FletNix"),t(),a(3,"div",2)(4,"form",3),F("ngSubmit",function(){return r.onSubmit()}),a(5,"div",4)(6,"label",5)(7,"span",6),o(8,"Username"),t()(),c(9,"input",7),s(10,G,2,1,"ng-container",8),t(),a(11,"div",4)(12,"label",5)(13,"span",6),o(14,"Email"),t()(),c(15,"input",9),s(16,Y,3,1,"ng-container",8),t(),a(17,"div",4)(18,"label",5)(19,"span",6),o(20,"Password"),t()(),c(21,"input",10),s(22,$,3,0,"ng-container",8),t(),a(23,"div",11)(24,"button",12),o(25,"Register "),s(26,z,1,0,"span",13),t()()()(),a(27,"div",14)(28,"p",15)(29,"strong"),o(30,"Join now!"),t(),o(31," You are missing out on dynamic and exciting entertainment recommendations "),t()()()),i&2){let u,g,f;l(4),d("formGroup",r.registerForm),l(6),d("ngIf",((u=r.registerForm.get("username"))==null?null:u.touched)&&((u=r.registerForm.get("username"))==null?null:u.invalid)),l(6),d("ngIf",((g=r.registerForm.get("email"))==null?null:g.touched)&&((g=r.registerForm.get("email"))==null?null:g.invalid)),l(6),d("ngIf",((f=r.registerForm.get("password"))==null?null:f.touched)&&((f=r.registerForm.get("password"))==null?null:f.invalid)),l(2),d("disabled",r.loading),l(2),h(r.loading?26:-1)}},dependencies:[k,D,P,I,N,T,B,U,j],styles:['.label-text[_ngcontent-%COMP%]{color:#fff}.image-background[_ngcontent-%COMP%]{background-image:url("./media/ant_man-Q6IU5DKY.jpg");background-size:cover;background-position:center}.image-background[_ngcontent-%COMP%]:before{content:"";height:100svh;position:absolute;top:0;left:0;width:100svw;background:linear-gradient(90deg,#000 10%,#09097900 57%,#00d4ff00)}']})}return e})();export{ee as RegisterComponent};
